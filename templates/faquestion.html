

<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChefQuiz</title>

   <!-- Ajoutez ces liens Bootstrap si ce n'est pas déjà fait dans votre fichier HTML -->
  <!-- CSS Bootstrap -->
<!-- Bootstrap core CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">



  
  <!-- JavaScript Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.css' %}">

<style>
  @import url("https://fonts.googleapis.com/css2?family=Redressed&family=Merriweather:wght@300;400;700&display=swap");
  .redressed {
      font-family: "Redressed", serif;
  }
  .merriweather {
      font-family: "Merriweather", serif;
  }
</style>
</head>
<body style="background: linear-gradient(rgba(0,0,0, 0.8), rgba(0,0,0, 0.8));">


  
  <!-- Section FAQ -->
<section id="faq" class="bg-transparent py-5">
  <div class="container redressed">
    <div class="card bg-transparent " style="border-bottom: none; border: solid 1px white; ">
      <div class="card-header text-center">
        
        <h2 class="text-center my-4 text-light"><a class="btn btn-outline-primary me-3" href="{% url 'index' %}" ><strong> <-Retour</strong></a> Questions Fréquentes (FAQ)</h2>
      </div>
    
    
    <div class="accordion" id="faqAccordion">
      
      <!-- Question 1 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            Qu'est-ce que le RAG et comment cela améliore l'apprentissage ?
          </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show merriweather" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Le **RAG** (Retrieval-Augmented Generation) combine des documents contextuels avec des modèles génératifs pour fournir des réponses précises et contextualisées, ce qui permet une meilleure compréhension des concepts et une interaction plus fluide avec l'IA.
          </div>
        </div>
      </div>

      <!-- Question 2 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Comment fonctionne le chat avec l'IA ?
          </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Le chat avec l'IA vous permet de poser des questions en temps réel sur des sujets culinaires. L'IA analyse le contexte du cours et répond avec des informations pertinentes et claires pour vous aider à progresser.
          </div>
        </div>
      </div>

      <!-- Question 3 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingThree">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Les cours sont-ils gratuits ?
          </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Nos cours de cuisine sont gratuits avec un accès limité à certaines ressources. Pour un accès complet et des fonctionnalités avancées (comme l'IA), nous proposons une formule premium.
          </div>
        </div>
      </div>

      <!-- Question 4 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingFour">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
            Comment puis-je m'inscrire ?
          </button>
        </h2>
        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Vous pouvez vous inscrire en cliquant sur le bouton "S'inscrire" en haut à droite de notre site. Suivez les instructions pour créer votre compte et commencer à accéder aux cours.
          </div>
        </div>
      </div>

      <!-- Question 5 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingFive">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
            Est-ce que le site est accessible sur mobile ?
          </button>
        </h2>
        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Oui, notre site est entièrement responsive et vous pouvez accéder à tous les cours et fonctionnalités via votre téléphone ou tablette.
          </div>
        </div>
      </div>

    </div>
  </div>
  </div>
</section>

<style>
  #chatbot-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
      font-size: 24px;
      cursor: pointer;
  }

  #chatbot-modal {
      z-index: 1050;
  }

  #chat-messages {
      height: 300px;
      overflow-y: auto;
      border: 1px solid #ddd;
      padding: 10px;
      background-color: #f9f9f9;
  }

  .chat-message {
      margin-bottom: 10px;
  }

  .chat-message.user {
      text-align: right;
      color: blue;
  }

  .chat-message.ia {
      text-align: left;
      /*color: rgb(23, 31, 23);*/
  }
</style>

<!-- Chatbot Button -->
<button id="chatbot-button" style="z-index: 1000;" onclick="openChatbot()">  <i class="fas fa-robot"></i></button>

<!-- Chatbot Modal -->
<div class="modal fade" id="chatbot-modal" tabindex="-1" aria-labelledby="chatbotLabel" aria-hidden="true" data-bs-backdrop="false">
    <div class="modal-dialog" >
        <div class="modal-content bg-dark" >
            <div class="modal-header">
                <h5 class="modal-title text-light" id="chatbotLabel"><i class="fas fa-robot"></i> Chat avec l'IA</h5>
                <button type="button" class="btn-close bg-light" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="chat-messages"></div>
                <div class="input-group mt-3">
                    <input type="text" id="user-input" class="form-control" placeholder="Posez votre question...">
                    <button class="btn btn-primary" id="send-button" onclick="sendMessage()">Envoyer</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
  function openChatbot() {
      const modal = new bootstrap.Modal(document.getElementById('chatbot-modal'));
      modal.show();
  }

  function sendMessage() {
      const userInput = document.getElementById('user-input');
      const userMessage = userInput.value.trim();
      if (!userMessage) return;

      // Ajouter le message utilisateur à l'interface
      const chatMessages = document.getElementById('chat-messages');
      const userMessageDiv = document.createElement('div');
      userMessageDiv.className = 'chat-message user';
      userMessageDiv.textContent = userMessage;
      chatMessages.appendChild(userMessageDiv);

      // Efface l'entrée utilisateur
      userInput.value = '';

      // Appel AJAX pour envoyer le message au backend
      fetch('/ask_ia', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': getCsrfToken(),
          },
          body: JSON.stringify({ message: userMessage })
      })
      .then(response => response.json())
      .then(data => {
          // Ajouter la réponse de l'IA à l'interface
          const iaMessageDiv = document.createElement('div');
          iaMessageDiv.className = 'chat-message ia';
          iaMessageDiv.textContent = data.response;
          chatMessages.appendChild(iaMessageDiv);

          // Faire défiler vers le bas
          chatMessages.scrollTop = chatMessages.scrollHeight;
      })
      .catch(error => {
          console.error('Erreur:', error);
      });
  }

  function handleUserInput(event) {
      // Si la touche "Enter" est pressée
      if (event.key === "Enter") {
          sendMessage();
      }
  }

  function getCsrfToken() {
      let cookieValue = null;
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          if (cookie.startsWith('csrftoken=')) {
              cookieValue = cookie.substring('csrftoken='.length);
              break;
          }
      }
      return cookieValue;
  }

  // Ajouter un écouteur pour détecter "Enter" sur l'input utilisateur
  document.addEventListener("DOMContentLoaded", function() {
      const userInput = document.getElementById('user-input');
      userInput.addEventListener('keypress', handleUserInput);
  });
</script>
</body>
</html>

 